Started by user [8mha:////4DXzqb/P0g4+3IeEV1FfumtMLlRmcFFdUMiwkSEQeauUAAAAlx+LCAAAAAAAAP9b85aBtbiIQTGjNKU4P08vOT+vOD8nVc83PyU1x6OyILUoJzMv2y+/JJUBAhiZGBgqihhk0NSjKDWzXb3RdlLBUSYGJk8GtpzUvPSSDB8G5tKinBIGIZ+sxLJE/ZzEvHT94JKizLx0a6BxUmjGOUNodHsLgAzWEgZu/dLi1CL9xJTczDwAj6GcLcAAAAA=[0madmin
Running as SYSTEM
Building in workspace /var/jenkins_home/workspace/test_app
The recommended git tool is: NONE
No credentials specified
 > git rev-parse --resolve-git-dir /var/jenkins_home/workspace/test_app/.git # timeout=10
Fetching changes from the remote Git repository
 > git config remote.origin.url https://github.com/anyatamax/DevOps_SberTech.git # timeout=10
Fetching upstream changes from https://github.com/anyatamax/DevOps_SberTech.git
 > git --version # timeout=10
 > git --version # 'git version 2.39.2'
 > git fetch --tags --force --progress -- https://github.com/anyatamax/DevOps_SberTech.git +refs/heads/*:refs/remotes/origin/* # timeout=10
 > git rev-parse refs/remotes/origin/lab4^{commit} # timeout=10
Checking out Revision fd8d2595dacb29c7e4704ee2a2764bf009ad07fa (refs/remotes/origin/lab4)
 > git config core.sparsecheckout # timeout=10
 > git checkout -f fd8d2595dacb29c7e4704ee2a2764bf009ad07fa # timeout=10
Commit message: "add tests"
 > git rev-list --no-walk fd8d2595dacb29c7e4704ee2a2764bf009ad07fa # timeout=10
[test_app] $ /bin/sh -xe /tmp/jenkins257291240011092046.sh
+ cd my_app
+ docker build -t app .
#1 [internal] load build definition from Dockerfile
#1 sha256:03378950b0c946a9f1711e091e4db2c41f4f0517b7831a0995dbad1ce31ee62b
#1 transferring dockerfile: 32B 0.0s done
#1 DONE 0.0s

#2 [internal] load .dockerignore
#2 sha256:c03a17d1d6e803e124cfa611fd4d1ef27598c6130f19a3e9375aaafb70a25207
#2 transferring context: 2B done
#2 DONE 0.0s

#3 [internal] load metadata for docker.io/library/ubuntu:latest
#3 sha256:abd44fdc5704a1f31ce24272a9c459712f2a16d9c7c7ce9bcc7a9b6c11e01aa9
#3 DONE 1.1s

#4 [1/7] FROM docker.io/library/ubuntu:latest@sha256:8eab65df33a6de2844c9aefd19efe8ddb87b7df5e9185a4ab73af936225685bb
#4 sha256:efc1c99f68cfc984c2980ee7719f93ec52e69a0cf3df478652e710c2c47b3756
#4 DONE 0.0s

#8 [internal] load build context
#8 sha256:7359ebd51f0e84d00cdb7442df72768ed87ab9b2e6ef00ca745de365737673a1
#8 transferring context: 15.18kB 0.1s done
#8 DONE 0.1s

#5 [2/7] RUN apt-get update -y
#5 sha256:87cad86a8f4e445f4c90d95cd8ab3b45c70206c440abc2263f4e4597f75b82d4
#5 CACHED

#6 [3/7] RUN apt-get install -y python3-pip python3-dev build-essential
#6 sha256:7e9ee34b265df92bf734bb6146aa29581d0a0d41ae71eb7c40243f80493714d3
#6 CACHED

#7 [4/7] RUN pip3 install pytest allure-pytest
#7 sha256:cc8ece1958c50ac864c2cbe6199d651d610faab064bcc5fb1687cfddf588efc0
#7 CACHED

#9 [5/7] COPY . /my_app
#9 sha256:ac154ae84289bcb5143fcf15f3c1fb80a4c72ab7f9fc87654b0dddaf28e592e0
#9 DONE 0.0s

#10 [6/7] WORKDIR /my_app
#10 sha256:1788daafb3ce276d2f666d283371446c565639e1bc58dfbaa0c8400db82fdf5e
#10 DONE 0.0s

#11 [7/7] RUN python3 app.py && pytest -v test_main.py --alluredir=reports/
#11 sha256:d8011f5e832012cd8b83010921679fa4f541f3c32223748f2adc3d4a63310524
#11 0.176 Hello 2024
#11 0.297 ============================= test session starts ==============================
#11 0.297 platform linux -- Python 3.10.12, pytest-7.4.3, pluggy-1.3.0 -- /usr/bin/python3
#11 0.297 cachedir: .pytest_cache
#11 0.297 rootdir: /my_app
#11 0.297 plugins: allure-pytest-2.13.2
#11 0.297 collecting ... collected 2 items
#11 0.299 
#11 0.299 test_main.py::TestMain::test_add PASSED                                  [ 50%]
#11 0.300 test_main.py::TestMain::test_subtract PASSED                             [100%]
#11 0.302 
#11 0.302 ============================== 2 passed in 0.01s ===============================
#11 DONE 0.3s

#12 exporting to image
#12 sha256:e8c613e07b0b7ff33893b694f7759a10d42e180f2b4dc349fb57dc6b71dcab00
#12 exporting layers 0.0s done
#12 writing image sha256:199f354d41066dc0cb5522ed03ede96954e451e718d0b2d3ac07378bbafc8274 done
#12 naming to docker.io/library/app done
#12 DONE 0.0s
[test_app] $ /bin/sh -xe /tmp/jenkins2434122192904798471.sh
+ docker run --name jenkins_app app
[test_app] $ /bin/sh -xe /tmp/jenkins15549834482629576605.sh
+ docker cp jenkins_app:/my_app/reports my_app/reports/
[test_app] $ /var/jenkins_home/tools/hudson.plugins.sonar.SonarRunnerInstallation/SonarQube_5/bin/sonar-scanner "requires SonarQube Scanner 2.1+" -Dsonar.host.url=http://localhost:9000 ******** -Dsonar.language=python -Dsonar.projectBaseDir=/var/lib/jenkins/workspace/my_app -Dsonar.host.url=https://da32-188-244-13-153.ngrok-free.app -Dsonar.projectVersion=1.0 -Dsonar.sources=. -Dsonar.analysis.mode=publish -Dsonar.verbose=true
WARN: Property 'sonar.host.url' with value 'http://localhost:9000' is overridden with value 'https://da32-188-244-13-153.ngrok-free.app'
INFO: Scanner configuration file: /var/jenkins_home/tools/hudson.plugins.sonar.SonarRunnerInstallation/SonarQube_5/conf/sonar-scanner.properties
INFO: Project root configuration file: NONE
15:06:59.821 INFO: SonarScanner 5.0.1.3006
15:06:59.826 INFO: Java 17.0.9 Eclipse Adoptium (64-bit)
15:06:59.826 INFO: Linux 5.15.49-linuxkit aarch64
15:06:59.924 DEBUG: keyStore is : 
15:06:59.925 DEBUG: keyStore type is : pkcs12
15:06:59.925 DEBUG: keyStore provider is : 
15:06:59.925 DEBUG: init keystore
15:06:59.925 DEBUG: init keymanager of type SunX509
15:07:00.012 DEBUG: Create: /root/.sonar/cache
15:07:00.012 INFO: User cache: /root/.sonar/cache
15:07:00.012 DEBUG: Create: /root/.sonar/cache/_tmp
15:07:00.016 DEBUG: Extract sonar-scanner-api-batch in temp...
15:07:00.020 DEBUG: Get bootstrap index...
15:07:00.020 DEBUG: Download: https://da32-188-244-13-153.ngrok-free.app/batch/index
15:07:00.627 DEBUG: Get bootstrap completed
15:07:00.630 DEBUG: Download https://da32-188-244-13-153.ngrok-free.app/batch/file?name=sonar-scanner-engine-shaded-10.3.0.82913-all.jar to /root/.sonar/cache/_tmp/fileCache1297910574474934561.tmp
15:07:35.537 DEBUG: Create isolated classloader...
15:07:35.546 DEBUG: Start temp cleaning...
15:07:35.549 DEBUG: Temp cleaning done
15:07:35.549 DEBUG: Execution getVersion
15:07:35.556 INFO: Analyzing on SonarQube server 10.3.0.82913
15:07:35.557 DEBUG: Execution execute
15:07:35.717 DEBUG: Community 10.3.0.82913
15:07:35.834 INFO: Load global settings
15:07:36.162 DEBUG: GET 200 https://da32-188-244-13-153.ngrok-free.app/api/settings/values.protobuf | time=327ms
15:07:36.179 INFO: Load global settings (done) | time=345ms
15:07:36.180 INFO: Server id: 147B411E-AYxUQBapzNpIsTSa5Xhz
15:07:36.183 DEBUG: Create : /root/.sonar/_tmp
15:07:36.183 INFO: User cache: /root/.sonar/cache
15:07:36.186 INFO: Load/download plugins
15:07:36.186 INFO: Load plugins index
15:07:36.292 DEBUG: GET 200 https://da32-188-244-13-153.ngrok-free.app/api/plugins/installed | time=106ms
15:07:36.314 INFO: Load plugins index (done) | time=128ms
15:07:36.315 DEBUG: Download plugin 'csharp' to '/root/.sonar/_tmp/fileCache1278585653107685870.tmp'
15:07:36.420 DEBUG: GET 200 https://da32-188-244-13-153.ngrok-free.app/api/plugins/download?plugin=csharp | time=105ms
15:07:39.405 DEBUG: Download plugin 'cayc' to '/root/.sonar/_tmp/fileCache17471849159363994809.tmp'
15:07:39.513 DEBUG: GET 200 https://da32-188-244-13-153.ngrok-free.app/api/plugins/download?plugin=cayc | time=107ms
15:07:39.887 DEBUG: Download plugin 'config' to '/root/.sonar/_tmp/fileCache17659717195568315693.tmp'
15:07:39.990 DEBUG: GET 200 https://da32-188-244-13-153.ngrok-free.app/api/plugins/download?plugin=config | time=103ms
15:07:39.995 DEBUG: Download plugin 'flex' to '/root/.sonar/_tmp/fileCache11134054265004589960.tmp'
15:07:40.097 DEBUG: GET 200 https://da32-188-244-13-153.ngrok-free.app/api/plugins/download?plugin=flex | time=102ms
15:07:41.361 DEBUG: Download plugin 'go' to '/root/.sonar/_tmp/fileCache9261450502705659498.tmp'
15:07:41.477 DEBUG: GET 200 https://da32-188-244-13-153.ngrok-free.app/api/plugins/download?plugin=go | time=116ms
15:07:52.928 DEBUG: Download plugin 'web' to '/root/.sonar/_tmp/fileCache711691508074195425.tmp'
15:07:53.032 DEBUG: GET 200 https://da32-188-244-13-153.ngrok-free.app/api/plugins/download?plugin=web | time=104ms
15:07:53.986 DEBUG: Download plugin 'iac' to '/root/.sonar/_tmp/fileCache15678082793438860359.tmp'
15:07:54.105 DEBUG: GET 200 https://da32-188-244-13-153.ngrok-free.app/api/plugins/download?plugin=iac | time=118ms
15:07:55.957 DEBUG: Download plugin 'jacoco' to '/root/.sonar/_tmp/fileCache14371665899428142600.tmp'
15:07:56.062 DEBUG: GET 200 https://da32-188-244-13-153.ngrok-free.app/api/plugins/download?plugin=jacoco | time=104ms
15:07:56.067 DEBUG: Download plugin 'java' to '/root/.sonar/_tmp/fileCache4099912873735329990.tmp'
15:07:56.167 DEBUG: GET 200 https://da32-188-244-13-153.ngrok-free.app/api/plugins/download?plugin=java | time=99ms
15:08:14.229 DEBUG: Download plugin 'javascript' to '/root/.sonar/_tmp/fileCache14990808050362706732.tmp'
15:08:14.338 DEBUG: GET 200 https://da32-188-244-13-153.ngrok-free.app/api/plugins/download?plugin=javascript | time=108ms
15:08:45.847 DEBUG: Download plugin 'kotlin' to '/root/.sonar/_tmp/fileCache7936330163303622592.tmp'
15:08:45.947 DEBUG: GET 200 https://da32-188-244-13-153.ngrok-free.app/api/plugins/download?plugin=kotlin | time=100ms
15:09:34.810 DEBUG: Download plugin 'php' to '/root/.sonar/_tmp/fileCache13306775430419940267.tmp'
15:09:34.917 DEBUG: GET 200 https://da32-188-244-13-153.ngrok-free.app/api/plugins/download?plugin=php | time=106ms
15:09:41.635 DEBUG: Download plugin 'python' to '/root/.sonar/_tmp/fileCache17176082019333738425.tmp'
15:09:41.738 DEBUG: GET 200 https://da32-188-244-13-153.ngrok-free.app/api/plugins/download?plugin=python | time=102ms
15:09:58.239 DEBUG: Download plugin 'ruby' to '/root/.sonar/_tmp/fileCache11886728382606180799.tmp'
15:09:58.357 DEBUG: GET 200 https://da32-188-244-13-153.ngrok-free.app/api/plugins/download?plugin=ruby | time=117ms
15:10:20.627 DEBUG: Download plugin 'sonarscala' to '/root/.sonar/_tmp/fileCache16010909980245033077.tmp'
15:10:20.728 DEBUG: GET 200 https://da32-188-244-13-153.ngrok-free.app/api/plugins/download?plugin=sonarscala | time=101ms
15:10:39.399 DEBUG: Download plugin 'text' to '/root/.sonar/_tmp/fileCache15483266532924807375.tmp'
15:10:39.499 DEBUG: GET 200 https://da32-188-244-13-153.ngrok-free.app/api/plugins/download?plugin=text | time=100ms
15:10:47.021 DEBUG: Download plugin 'vbnet' to '/root/.sonar/_tmp/fileCache2491254219025943291.tmp'
15:10:47.129 DEBUG: GET 200 https://da32-188-244-13-153.ngrok-free.app/api/plugins/download?plugin=vbnet | time=107ms
15:10:52.467 DEBUG: Download plugin 'xml' to '/root/.sonar/_tmp/fileCache8701355516992752773.tmp'
15:10:52.571 DEBUG: GET 200 https://da32-188-244-13-153.ngrok-free.app/api/plugins/download?plugin=xml | time=104ms
15:10:59.079 INFO: Load/download plugins (done) | time=202893ms
15:10:59.151 DEBUG: Plugins:
15:10:59.152 DEBUG:   * Python Code Quality and Security 4.10.0.13725 (python)
15:10:59.152 DEBUG:   * Clean as You Code 2.2.2.656 (cayc)
15:10:59.152 DEBUG:   * Go Code Quality and Security 1.15.0.4655 (go)
15:10:59.152 DEBUG:   * JaCoCo 1.3.0.1538 (jacoco)
15:10:59.152 DEBUG:   * Kotlin Code Quality and Security 2.18.0.2938 (kotlin)
15:10:59.152 DEBUG:   * IaC Code Quality and Security 1.22.0.7057 (iac)
15:10:59.152 DEBUG:   * JavaScript/TypeScript/CSS Code Quality and Security 10.9.0.24449 (javascript)
15:10:59.152 DEBUG:   * Ruby Code Quality and Security 1.15.0.4655 (ruby)
15:10:59.152 DEBUG:   * Scala Code Quality and Security 1.15.0.4655 (sonarscala)
15:10:59.152 DEBUG:   * C# Code Quality and Security 9.13.0.79967 (csharp)
15:10:59.152 DEBUG:   * Java Code Quality and Security 7.27.1.33504 (java)
15:10:59.152 DEBUG:   * HTML Code Quality and Security 3.11.0.4708 (web)
15:10:59.152 DEBUG:   * Flex Code Quality and Security 2.12.0.4568 (flex)
15:10:59.153 DEBUG:   * XML Code Quality and Security 2.10.0.4108 (xml)
15:10:59.153 DEBUG:   * PHP Code Quality and Security 3.33.0.11274 (php)
15:10:59.153 DEBUG:   * Text Code Quality and Security 2.7.1.1388 (text)
15:10:59.153 DEBUG:   * VB.NET Code Quality and Security 9.13.0.79967 (vbnet)
15:10:59.153 DEBUG:   * Configuration detection for Code Quality and Security 1.3.0.654 (config)
15:10:59.184 INFO: ------------------------------------------------------------------------
15:10:59.185 INFO: EXECUTION FAILURE
15:10:59.185 INFO: ------------------------------------------------------------------------
15:10:59.185 INFO: Total time: 3:59.408s
15:10:59.200 INFO: Final Memory: 7M/30M
15:10:59.201 INFO: ------------------------------------------------------------------------
15:10:59.201 ERROR: Error during SonarScanner execution
15:10:59.201 ERROR: Tasks support was removed in SonarQube 7.6.
15:10:59.201 ERROR: 
15:10:59.201 ERROR: Re-run SonarScanner using the -X switch to enable full debug logging.
WARN: Unable to locate 'report-task.txt' in the workspace. Did the SonarScanner succeed?
ERROR: SonarQube scanner exited with non-zero code: 2
[test_app] $ /var/jenkins_home/tools/ru.yandex.qatools.allure.jenkins.tools.AllureCommandlineInstallation/allure/bin/allure generate /var/jenkins_home/workspace/test_app/MY_APP/REPORTS -c -o /var/jenkins_home/workspace/test_app/allure-report
Report successfully generated to /var/jenkins_home/workspace/test_app/allure-report
Allure report was successfully generated.
Creating artifact for the build.
Artifact was added to the build.
Finished: FAILURE

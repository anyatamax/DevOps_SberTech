Started by user [8mha:////4DXzqb/P0g4+3IeEV1FfumtMLlRmcFFdUMiwkSEQeauUAAAAlx+LCAAAAAAAAP9b85aBtbiIQTGjNKU4P08vOT+vOD8nVc83PyU1x6OyILUoJzMv2y+/JJUBAhiZGBgqihhk0NSjKDWzXb3RdlLBUSYGJk8GtpzUvPSSDB8G5tKinBIGIZ+sxLJE/ZzEvHT94JKizLx0a6BxUmjGOUNodHsLgAzWEgZu/dLi1CL9xJTczDwAj6GcLcAAAAA=[0madmin
Running as SYSTEM
Building in workspace /var/jenkins_home/workspace/test_app
The recommended git tool is: NONE
No credentials specified
 > git rev-parse --resolve-git-dir /var/jenkins_home/workspace/test_app/.git # timeout=10
Fetching changes from the remote Git repository
 > git config remote.origin.url https://github.com/anyatamax/DevOps_SberTech.git # timeout=10
Fetching upstream changes from https://github.com/anyatamax/DevOps_SberTech.git
 > git --version # timeout=10
 > git --version # 'git version 2.39.2'
 > git fetch --tags --force --progress -- https://github.com/anyatamax/DevOps_SberTech.git +refs/heads/*:refs/remotes/origin/* # timeout=10
 > git rev-parse refs/remotes/origin/lab4^{commit} # timeout=10
Checking out Revision fd8d2595dacb29c7e4704ee2a2764bf009ad07fa (refs/remotes/origin/lab4)
 > git config core.sparsecheckout # timeout=10
 > git checkout -f fd8d2595dacb29c7e4704ee2a2764bf009ad07fa # timeout=10
Commit message: "add tests"
 > git rev-list --no-walk fd8d2595dacb29c7e4704ee2a2764bf009ad07fa # timeout=10
[test_app] $ /bin/sh -xe /tmp/jenkins10595411984430720366.sh
+ cd my_app
+ docker build -t app .
#1 [internal] load build definition from Dockerfile
#1 sha256:df5c954b29df4ce8ecf95302164ed2ba566b250e70a23c5a91828f0e3b1bfd1a
#1 transferring dockerfile: 32B done
#1 DONE 0.0s

#2 [internal] load .dockerignore
#2 sha256:c5440ea33eea079eaf2d6aeb8e39bb26ebb730e6db6289f07d1354fc07fe3832
#2 transferring context: 2B done
#2 DONE 0.0s

#3 [internal] load metadata for docker.io/library/ubuntu:latest
#3 sha256:abd44fdc5704a1f31ce24272a9c459712f2a16d9c7c7ce9bcc7a9b6c11e01aa9
#3 DONE 1.7s

#11 [1/7] FROM docker.io/library/ubuntu:latest@sha256:8eab65df33a6de2844c9aefd19efe8ddb87b7df5e9185a4ab73af936225685bb
#11 sha256:efc1c99f68cfc984c2980ee7719f93ec52e69a0cf3df478652e710c2c47b3756
#11 DONE 0.0s

#7 [internal] load build context
#7 sha256:dee7c2224a96e761f5d16fa3e7795c00a39dc8beb543d2bfa34807445b0d346c
#7 transferring context: 1.47kB 0.1s done
#7 DONE 0.1s

#4 [2/7] RUN apt-get update -y
#4 sha256:87cad86a8f4e445f4c90d95cd8ab3b45c70206c440abc2263f4e4597f75b82d4
#4 CACHED

#5 [3/7] RUN apt-get install -y python3-pip python3-dev build-essential
#5 sha256:7e9ee34b265df92bf734bb6146aa29581d0a0d41ae71eb7c40243f80493714d3
#5 CACHED

#6 [4/7] RUN pip3 install pytest allure-pytest
#6 sha256:cc8ece1958c50ac864c2cbe6199d651d610faab064bcc5fb1687cfddf588efc0
#6 CACHED

#8 [5/7] COPY . /my_app
#8 sha256:a1035c21273699004579b705d31ca343b6cd20113a4a8348d7c0b506472ef70f
#8 DONE 0.0s

#9 [6/7] WORKDIR /my_app
#9 sha256:7058078d62e5c5dbd30dce845e6b1fde705896828e0be65a853bff1a46a481de
#9 DONE 0.0s

#10 [7/7] RUN python3 app.py && pytest -v test_main.py --alluredir=reports/
#10 sha256:518e2f75fb6ebe60fa09264ff599e1f620863864fe34fbe870d615b513ba02e6
#10 0.182 Hello 2024
#10 0.298 ============================= test session starts ==============================
#10 0.298 platform linux -- Python 3.10.12, pytest-7.4.3, pluggy-1.3.0 -- /usr/bin/python3
#10 0.298 cachedir: .pytest_cache
#10 0.298 rootdir: /my_app
#10 0.298 plugins: allure-pytest-2.13.2
#10 0.298 collecting ... collected 2 items
#10 0.301 
#10 0.301 test_main.py::TestMain::test_add PASSED                                  [ 50%]
#10 0.302 test_main.py::TestMain::test_subtract PASSED                             [100%]
#10 0.304 
#10 0.304 ============================== 2 passed in 0.01s ===============================
#10 DONE 0.3s

#12 exporting to image
#12 sha256:e8c613e07b0b7ff33893b694f7759a10d42e180f2b4dc349fb57dc6b71dcab00
#12 exporting layers 0.0s done
#12 writing image sha256:946638dee774882aeebbeee8a872e65987f37eff7ec7d754f4419c51b4a62b37 done
#12 naming to docker.io/library/app done
#12 DONE 0.0s
[test_app] $ /bin/sh -xe /tmp/jenkins17626007525304097955.sh
+ docker run --name jenkins_app3 app
[test_app] $ /bin/sh -xe /tmp/jenkins5565632051714582040.sh
+ docker cp jenkins_app3:/my_app/reports my_app/reports/
[test_app] $ /bin/sh -xe /tmp/jenkins423246558995307814.sh
+ docker run -d --name sonarqube -e SONAR_ES_BOOTSTRAP_CHECKS_DISABLE=true -p 9000:9000 sonarqube:latest
docker: Error response from daemon: Conflict. The container name "/sonarqube" is already in use by container "902279624a5da0c403dd26901d832affc8390095646484c94fcf1ea89357904b". You have to remove (or rename) that container to be able to reuse that name.
See 'docker run --help'.
Build step 'Execute shell' marked build as failure
[test_app] $ /var/jenkins_home/tools/ru.yandex.qatools.allure.jenkins.tools.AllureCommandlineInstallation/allure/bin/allure generate /var/jenkins_home/workspace/test_app/MY_APP/REPORTS -c -o /var/jenkins_home/workspace/test_app/allure-report
Report successfully generated to /var/jenkins_home/workspace/test_app/allure-report
Allure report was successfully generated.
Creating artifact for the build.
Artifact was added to the build.
Finished: FAILURE
